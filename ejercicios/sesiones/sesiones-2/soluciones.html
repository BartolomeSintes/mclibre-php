<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Sesiones (2). Soluciones. Ejercicios (sesiones). PHP. Bartolomé Sintes Marco. www.mclibre.org</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../../varios/php.css" title="mclibre">
  <link rel="icon" href="../../../varios/favicon.svg">
  <link rel="stylesheet" href="../../../varios/prism.css">
  <script src="../../../varios/prism.js"></script>
  <script src="../../../varios/mclibre.js"></script>
</head>

<body>
  <h1>Ejercicios (sesiones) - Sesiones (2) - Soluciones</h1>

  <nav>
    <p>
      <a href="../../../index.html"><img src="../../../varios/iconos/icono-php.svg" alt="Índice de PHP" title="Índice de PHP" width="48" height="48"></a>
      <a href="index.html#"><img src="../../../varios/iconos/icono-arrow-circle-up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36"></a>
    </p>

    <div class="toc">
      <h2>Sesiones (2)</h2>

      <h3><a href="index.html">Enunciados</a></h3>
      <ul>
        <li><a href="index.html#ejercicio-1">1 - Texto (1)</a></li>
        <li><a href="index.html#ejercicio-2">2 - Texto (2)</a></li>
        <li><a href="index.html#ejercicio-3">3 - Mayúsculas</a></li>
        <li><a href="index.html#ejercicio-4">4 - Mayúsc. y minúsculas</a></li>
        <li><a href="index.html#ejercicio-5">5 - Formulario tres pasos</a></li>
        <li><a href="index.html#ejercicio-6">6 - Form. de confirmación</a></li>
        <li><a href="index.html#ejercicio-7">7 - Form. independientes</a></li>
      </ul>

      <h3><a href="index.html#">Soluciones</a></h3>
      <ul>
        <li><a href="#ejercicio-1">1 - Texto (1) - A</a></li>
        <li><a href="#ejercicio-1-b">1 - Texto (1) - B</a></li>
        <li><a href="#ejercicio-2">2 - Texto (2) - A</a></li>
        <li><a href="#ejercicio-2-b">2 - Texto (2) - B</a></li>
        <li><a href="#ejercicio-3">3 - Mayúsculas - A</a></li>
        <li><a href="#ejercicio-3-b">3 - Mayúsculas - B</a></li>
        <li><a href="#ejercicio-3-c">3 - Mayúsculas - C</a></li>
        <li><a href="#ejercicio-3-d">3 - Mayúsculas - D</a></li>
        <li><a href="#ejercicio-4">4 - Mayúsc. y minúsc. - A</a></li>
        <li><a href="#ejercicio-4-b">4 - Mayúsc. y minúsc. - B</a></li>
        <li><a href="#ejercicio-5">5 - Formulario tres pasos</a></li>
        <li><a href="#ejercicio-6">6 - Form. de confirmación</a></li>
        <li><a href="#ejercicio-7">7 - Form. independientes</a></li>
      </ul>
    </div>
  </nav>

  <p>En esta página se muestran una parte de las soluciones de los ejercicios <a href="index.html">Sesiones (2)</a>.</p>

  <p>Si lo prefiere, puede <a href="../../../soluciones/con-sesiones/cs-sesiones-2-soluciones.zip">descargar unas posibles soluciones completas</a> de estos ejercicios.</p>

  <p><img src="../../../varios/iconos/icono-warning.svg" alt="¡Atención!" title="¡Atención!" width="55" height="48">Para hacer estos ejercicios, se recomienda seguir el recorrido de la aplicación, suponiendo que el usuario introduce datos. Pero una vez completada la aplicación hay que comprobar desde el principio (cerrando el navegador previamente) que la aplicación funciona correctamente (es decir, que la aplicación tiene en cuenta que la primera vez que se ejecuta, todavía no hay datos).</p>

  <section id="ejercicio-1">
    <h3>Sesiones (2) 1 - Formulario Texto (1) - Solución A</h3>

    <p><strong>Nota</strong>: La diferencia entre las dos soluciones propuestas para este ejercicio es que la solución B sigue el procedimiento recomendado en estos apuntes de crear una variable auxiliar $xxOk por cada variable que recoge un control del formulario, mientras que la solución A no utiliza esa variable auxiliar ya que en este caso solamente se recoge un control.</p>

    <p>La página 1 del ejercicio debe mostrar el último texto escrito por el usuario, texto que es recogido por la segunda página. Para compartir esa información (el texto) entre ambas páginas recurriremos a una variable de sesión, por ejemplo $_SESSION["texto"].</p>

    <p>Este podría ser el orden en que se iría realizando este ejercicio:</p>

    <ol>
      <li id="li-1-1">Primero, la página 2 debe recoger el dato enviado por el formulario de la página 1. En este caso caso, como solo recibimos un dato, podemos simplificar el procedimiento habitual, ahorrándonos la variable auxiliar y realizar los pasos: función recoge(); variable para recoger el dato; comprobación y mensajes de error; si el dato es correcto, mensaje final.</li>
      <li id="li-1-2">Si el dato es correcto, debemos guardarlo en una variable de sesión, para que la página 1 pueda acceder a él.</li>
      <li id="li-1-3">Para que la página 2 pueda guardar datos en $_SESSION, debemos unir la página a la sesión. Conviene dar nombre a la sesión para que cada ejercicio utilice su propia matriz $_SESSION distinta del resto.</li>
      <li id="li-1-4">La página 1 muestra el nombre guardado en $_SESSION.</li>
      <li id="li-1-5">Para que la página 1 pueda usar datos de $_SESSION, debemos unir la página a la sesión. El nombre de la sesión debe ser el mismo en ambas páginas.</li>
      <li id="li-1-6">Pero la primera vez que se abre la página, $_SESSION no contiene ningún dato e intentar imprimirlo provocaría un error, por lo que añadimos la condición de que la variable que vamos a imprimir exista.</li>
    </ol>

    <p>sesiones-2-1-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión<span class="numero-circulo" tooltip-id="li-1-5">5</span>
session_name("sesiones-2-1");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario Texto 1 (Formulario)&lt;/h1&gt;

&lt;?php
// Si hay un texto guardado en la sesión, lo mostramos <span class="numero-circulo" tooltip-id="li-1-6" title="Pero la primera vez que se abre la página, $_SESSION no contiene ningún dato e intentar imprimirlo provocaría un error, por lo que añadimos la condición de que la variable que vamos a imprimir exista.">6</span>
if (isset($_SESSION["texto"])) {
    print "  &lt;p&gt;El último texto escrito es: &lt;strong&gt;$_SESSION[texto]&lt;/strong&gt;.&lt;/p&gt;\n"; <span class="numero-circulo" tooltip-id="li-1-4">4</span>
    print "\n";
}
?&gt;
  &lt;form action="sesiones-2-1-2.php" method="get"&gt;
    &lt;p&gt;Escriba texto:&lt;/p&gt;
// ...
</code>
</pre>
    </div>

    <p>sesiones-2-1-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-1-3">3</span>
session_name("sesiones-2-1");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario Texto 1 (Resultado)&lt;/h1&gt;

&lt;?php
// Función de recogida de datos <span class="numero-circulo" tooltip-id="li-1-1">1</span>
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos el texto
$texto   = recoge("texto");

// Comprobamos el texto y escribimos avisos si es necesario
if ($texto == "") {
    print "  &lt;p class=\"aviso\"&gt;No ha escrito su nombre.&lt;/p&gt;\n";
    print "\n";
} else {<span class="numero-circulo" tooltip-id="li-1-2">2</span>
    // Si el texto es válido, guardamos el texto en la sesión ...
    $_SESSION["texto"] = $texto;
    // y lo mostramos
    print "  &lt;p&gt;El texto es: &lt;strong&gt;$texto&lt;/strong&gt;.&lt;/p&gt;\n";
    print "\n";
}
?&gt;
    &lt;p&gt;&lt;a href="sesiones-2-1-1.php"&gt;Volver a la primera página.&lt;/a&gt;&lt;/p&gt;
// ...</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-1-b">
    <h3>Sesiones (2) 1 - Formulario Texto (1) - Solución B</h3>

    <p><strong>Nota</strong>: La diferencia entre las dos soluciones propuestas para este ejercicio es que la solución B sigue el procedimiento recomendado en estos apuntes de crear una variable auxiliar $xxOk por cada variable que recoge un control del formulario, mientras que la solución A no utiliza esa variable auxiliar ya que en este caso solamente se recoge un control.</p>

    <p>Se muestra únicamente la parte de la segunda página en la que aparece la variable auxiliar $textoOk.</p>

    <p>sesiones-2-1-b-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// ...

// Recogemos el texto
$texto   = recoge("texto");
$textoOk = false;

// Comprobamos el texto y escribimos avisos si es necesario
if ($texto == "") {
    print "  &lt;p class=\"aviso\"&gt;No ha escrito su nombre.&lt;/p&gt;\n";
    print "\n";
} else {
    $textoOk = true;
}

// Si el texto es válido,
if ($textoOk) {
  // guardamos el texto en la sesión
    $_SESSION["texto"] = $texto;
    // y lo mostramos
    print "  &lt;p&gt;El texto es: &lt;strong&gt;$texto&lt;/strong&gt;.&lt;/p&gt;\n";
    print "\n";
}
?&gt;
    &lt;p&gt;&lt;a href="sesiones-2-1-b-1.php"&gt;Volver a la primera página.&lt;/a&gt;&lt;/p&gt;
// ...</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-2">
    <h3>Sesiones (2) 2 - Formulario Texto (2) - Solución A</h3>

    <p><strong>Nota</strong>: La diferencia entre las dos soluciones propuestas para este ejercicio es que en la solución A $_SESSION["texto"] nunca es vacío, es decir, antes de que el usuario escriba texto en el formulario $_SESSION["texto"] no existe, mientras que en la solución B $_SESSION["texto"] existe siempre, pero tiene un valor vacío hasta que el usuario escribe texto en el formulario.</p>

    <p>Este podría ser el orden en que se iría realizando este ejercicio:</p>

    <ol start="0">
      <li id="li-2-a-0">Puesto que la página 2 redirige a la página 1, la página 2 no debe tener nada de HTML, ni ningún <span class="php-res">print</span>.</li>
      <li id="li-2-a-1">Primero, la página 2 debe recoger el dato enviado por el formulario de la página 1: función recoge() y variable para recoger el dato</li>
      <li id="li-2-a-2">Si el dato no es vacío, el dato se guarda en una variable de sesión, para que la página 1 pueda acceder a él.</li>
      <li id="li-2-a-3">Para que la página 2 pueda guardar datos en $_SESSION, debemos unir la página a la sesión. Conviene dar nombre a la sesión para que cada ejercicio utilice su propia matriz $_SESSION distinta del resto.</li>
      <li id="li-2-a-4">Finalmente, la página 2 redirige a la página 1.</li>
      <li id="li-2-a-5">La página 1 muestra el nombre guardado en $_SESSION.</li>
      <li id="li-2-a-6">Para que la página 1 pueda usar datos de $_SESSION, debemos unir la página a la sesión. El nombre de la sesión debe ser el mismo en ambas páginas.</li>
      <li id="li-2-a-7">Pero la primera vez que se abre la página, $_SESSION no contiene ningún dato e intentar imprimirlo provocaría un error, por lo que añadimos la condición de que la variable que vamos a imprimir exista.</li>
    </ol>

    <p>sesiones-2-2-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-2-a-6">6</span>
session_name("sesiones-2-2");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario Texto 2 (Formulario)&lt;/h1&gt;

&lt;?php
// Si hay un texto guardado en la sesión, lo mostramos <span class="numero-circulo" tooltip-id="li-2-a-7">7</span>
if (isset($_SESSION["texto"])) {
    print "  &lt;p&gt;El texto es: &lt;strong&gt;$_SESSION[texto]&lt;/strong&gt;.&lt;/p&gt;\n"; <span class="numero-circulo" tooltip-id="li-2-a-5">5</span>
    print "\n";
}
?&gt;
  &lt;form action="sesiones-2-2-2.php" method="get"&gt;
    &lt;p&gt;Escriba texto:&lt;/p&gt;
// ...</code>
</pre>
    </div>

    <p>sesiones-2-2-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-2-a-3">3</span>
session_name("sesiones-2-2");
session_start();

// Función de recogida de datos <span class="numero-circulo" tooltip-id="li-2-a-1">1</span>
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos el texto
$texto = recoge("texto");

// Si el texto no es vacío, lo guardamos en la sesión <span class="numero-circulo" tooltip-id="li-2-a-2">2</span>
if ($texto != "") {
    $_SESSION["texto"] = $texto;
}

// Volvemos al formulario <span class="numero-circulo" tooltip-id="li-2-a-4">4</span>
header("Location:sesiones-2-2-1.php");</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-2-b">
    <h3>Sesiones (2) 2 - Formulario Texto (2) - Solución B</h3>

    <p><strong>Nota</strong>: La diferencia entre las dos soluciones propuestas para este ejercicio es que en la solución A $_SESSION["texto"] nunca es vacío, es decir, antes de que el usuario escriba texto en el formulario $_SESSION["texto"] no existe, mientras que en la solución B $_SESSION["texto"] existe siempre, pero tiene un valor vacío hasta que el usuario escribe texto en el formulario.</p>

    <p>Este podría ser el orden en que se iría realizando este ejercicio:</p>

    <ol>
      <li id="li-2-b-1">Para que la página 1 pueda usar datos de $_SESSION, debemos unir la página a la sesión. Conviene dar nombre a la sesión para que cada ejercicio utilice su propia matriz $_SESSION distinta del resto.</li>
      <li id="li-2-b-2">La primera vez que se abre la página, $_SESSION no contiene ningún dato, por lo que al acceder a él provocaríamos un error. Para evitar ese problema, creamos la variable de sesión si esta no existe, dándole el valor vacío.</li>
      <li id="li-2-b-3">Si hay un valor no vacío en la variable de sesión, lo mostramos.</li>
      <li id="li-2-b-4">Para que la página 2 pueda guardar datos en $_SESSION, debemos unir la página a la sesión. El nombre de la sesión debe ser el mismo en ambas páginas.</li>
      <li id="li-2-b-5">Si alguien accediera a la segunda página directamente, sin pasar por la página 1, $_SESSION no contendría ningún dato, por lo que al acceder a él provocaríamos un error. Para evitar ese problema, creamos la variable de sesión si esta no existe, dándole el valor vacío. En este caso, en realidad, esta precaución no es necesaria, porque no accedemos al valor sino que simplemente lo establecemos si es necesario, pero en general suele ser necesario.</li>
      <li id="li-2-b-6">En la página 2 recogemos el dato enviado por el formulario de la página 1: función recoge() y variable para recoger el dato</li>
      <li id="li-2-b-7">Si se ha recibido algo, el dato se guarda en una variable de sesión, para que la página 1 pueda acceder a él.</li>
      <li id="li-2-b-8">Finalmente, la página 2 redirige siempre a la página 1.</li>
    </ol>

    <p>sesiones-2-2-b-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-2-b-1">1</span>
session_name("sesiones-2-2-b");
session_start();
// Si no existe la variable de sesión, la creamos vacía <span class="numero-circulo" tooltip-id="li-2-b-2">2</span>
if (!isset($_SESSION["texto"])) {
    $_SESSION["texto"] = "";
}
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario Texto 2 (Formulario)&lt;/h1&gt;

&lt;?php// Si hay un texto no vacío guardado en la sesión, lo mostramos <span class="numero-circulo" tooltip-id="li-2-b-3">3</span>
if ($_SESSION["texto"] != "") {
    print "  &lt;p&gt;El último texto escrito es: &lt;strong&gt;$_SESSION[texto]&lt;/strong&gt;.&lt;/p&gt;\n";
    print "\n";
}
?&gt;
  &lt;form action="sesiones-2-2-b-2.php" method="get"&gt;
    &lt;p&gt;Escriba texto:&lt;/p&gt;
// ...</code>
</pre>
    </div>

    <p>sesiones-2-2-b-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-2-b-4">4</span>
session_name("sesiones-2-2-b");
session_start();

// Si no existe la variable de sesión, la creamos vacía <span class="numero-circulo" tooltip-id="li-2-b-5">5</span>
if (!isset($_SESSION["texto"])) {
    $_SESSION["texto"] = "";
}

// Función de recogida de datos <span class="numero-circulo" tooltip-id="li-2-b-6">6</span>
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos el texto
$texto = recoge("texto");

// Si el texto no es vacío, lo guardamos en la sesión <span class="numero-circulo" tooltip-id="li-2-b-7">7</span>
if ($texto != "") {
    $_SESSION["texto"] = $texto;
}

// Volvemos al formulario <span class="numero-circulo" tooltip-id="li-2-b-8">8</span>
header("Location:sesiones-2-2-b-1.php");</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-3">
    <h3>Sesiones (2) 3 - Formulario Palabra en mayúsculas - Solución A</h3>

    <p>Este ejercicio es parecido al anterior. La diferencia es que si la palabra escrita por el usuario es incorrecta, el formulario muestra un mensaje de error y la palabra incorrecta en la caja de texto para su corrección.</p>

    <p>Este podría ser el orden en que se iría realizando este ejercicio:</p>

    <ol>
      <li id="li-3-a-1">En la página 2 recogemos el dato enviado por el formulario de la página 1: función recoge() y variable para recoger el dato</li>
      <li id="li-3-a-2">Como la primera página muestra siempre la palabra (si es correcta al principio de la página, si es incorrecta en la caja de texto), la guardamos en la sesión.</li>
      <li id="li-3-a-3">Por tanto, la página 2 debe conectarse a la sesión.</li>
      <li id="li-3-a-4">En la comprobación, si el dato es vacío, se guarda el aviso correspondiente.</li>
      <li id="li-3-a-5">Si la palabra no está en mayúsculas, se guarda el aviso correspondiente.</li>
      <li id="li-3-a-6">Si la palabra es correcta, se borran los avisos que pudiera haber de intentos anteriores.</li>
      <li id="li-3-a-7">Finalmente, volvemos a la primera página.</li>
      <li id="li-3-a-8">La página 1 debe conectarse a la sesión.</li>
      <li id="li-3-a-9">Si hay un error guardado en la sesión, el formulario muestra el aviso y la palabra en la caja de texto.</li>
      <li id="li-3-a-10">Si no hay un error guardado en la sesión, el formulario muestra la caja de texto.</li>
      <li id="li-3-a-11">La palabra correcta debe mostrarse cuando no hay error, pero cuando además hay alguna palabra guardada (ya que la primera vez que se accede a la primera página no hay error, pero no debe mostrarse nada).</li>
    </ol>

    <p>sesiones-2-3-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-3-a-8">8</span>
session_name("sesiones-2-3");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario Palabra en mayúsculas (Formulario)&lt;/h1&gt;

  &lt;form action="sesiones-2-3-2.php" method="get"&gt;

&lt;?php
// Si no hemos detectado un error y hay guardada una palabra en la sesión ... <span class="numero-circulo" tooltip-id="li-3-a-11">11</span>
if (!isset($_SESSION["error"]) && isset($_SESSION["palabra"])) {
    // ... mostramos la palabra
    print "  &lt;p&gt;Ha escrito una palabra en mayúsculas: &lt;strong&gt;$_SESSION[palabra]&lt;/strong&gt;.&lt;/p&gt;\n";
    print "\n";
}

print "    &lt;p&gt;Escriba una palabra en mayúsculas:&lt;/p&gt;\n";
print "\n";

// Si hemos detectado un error <span class="numero-circulo" tooltip-id="li-3-a-9">9</span>
if (isset($_SESSION["error"])) {
    // Mostramos el control, añadiendo el aviso e incluyendo el valor incorrecto en el control
    print "    &lt;p&gt;\n";
    print "      &lt;label&gt;\n";
    print "        Escriba una palabra en mayúsculas:\n";
    print "        &lt;input type=\"text\" name=\"palabra\" value=\"$_SESSION[palabra]\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[error]&lt;/span&gt;\n";
    print "    &lt;/p&gt;\n";
    print "\n";
} else {
    // Si no hemos detectado un error, lo mostramos... <span class="numero-circulo" tooltip-id="li-3-a-10">10</span>
    print "    &lt;p&gt;\n";
    print "      &lt;label&gt;\n";
    print "        Escriba una palabra en mayúsculas:\n";
    print "        &lt;input type=\"text\" name=\"palabra\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "    &lt;/p&gt;\n";
    print "\n";
}
?&gt;
// ...</code>
</pre>
    </div>

    <p>sesiones-2-3-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-3-a-3">3</span>
session_name("sesiones-2-3");
session_start();

// Función de recogida de datos <span class="numero-circulo" tooltip-id="li-3-a-1">1</span>
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos la palabra
$palabra   = recoge("palabra");

// Guardamos la palabra en la sesión <span class="numero-circulo" tooltip-id="li-3-a-2">2</span>
$_SESSION["palabra"] = $palabra;

// Comprobamos la palabra
if ($palabra == "") {
    // Si no se recibe palabra, guardamos en la sesión el mensaje de error <span class="numero-circulo" tooltip-id="li-3-a-4">4</span>
    $_SESSION["error"] = "No ha escrito ninguna palabra";
} elseif (!ctype_upper($palabra)) {
    // Si la palabra está en minúsculas, guardamos en la sesión el mensaje de error <span class="numero-circulo" tooltip-id="li-3-a-5">5</span>
    $_SESSION["error"] = "No ha escrito la palabra en mayúsculas";
} else {
    // Si la palabra es correcta, borramos el error anterior que pudiera haber en la sesión <span class="numero-circulo" tooltip-id="li-3-a-6">6</span>
    unset($_SESSION["error"]);
}

// Volvemos al formulario <span class="numero-circulo" tooltip-id="li-3-a-7">7</span>
header("Location:sesiones-2-3-1.php");</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-3-b">
    <h3>Sesiones (2) 3 - Formulario Palabra en mayúsculas - Solución B</h3>

    <p>Esta solución establece tres variables de sesión en vez de las dos de la solución anterior: el mensaje de error, la palabra correcta y la palabra incorrecta.</p>

    <p>Este podría ser el orden en que se iría realizando este ejercicio:</p>

    <ol>
      <li id="li-3-b-1">En la página 2 recogemos el dato enviado por el formulario de la página 1: función recoge() y variable para recoger el dato</li>
      <li id="li-3-b-2">Borramos todas las variables de sesión establecidas anteriormente.</li>
      <li id="li-3-b-3">Por tanto, la página 2 debe conectarse a la sesión.</li>
      <li id="li-3-b-4">En la comprobación, si el dato es vacío, se guarda el aviso correspondiente.</li>
      <li id="li-3-b-5">Si la palabra no está en mayúsculas, se guarda el aviso correspondiente y la palabra escrita por el usuario (para mostrarla en la caja de texto).</li>
      <li id="li-3-b-6">Si la palabra es correcta, se guarda la palabra escrita por el usuario.</li>
      <li id="li-3-b-7">Finalmente, volvemos a la primera página.</li>
      <li id="li-3-b-8">La página 1 debe conectarse a la sesión.</li>
      <li id="li-3-b-9">Si hay un error y un intento guardados en la sesión, el formulario muestra el aviso y la palabra en la caja de texto.</li>
      <li id="li-3-b-10">Si hay un error guardado en la sesión, el formulario muestra el aviso.</li>
      <li id="li-3-b-11">Si no hay un error guardado en la sesión, el formulario muestra la caja de texto.</li>
      <li id="li-3-b-12">Si hay una palabra guardada en la sesión, la palabra correcta debe mostrarse antes del formulario (ya que la palabra sólo se guarda cuando es correcta).</li>
    </ol>

    <p>sesiones-2-3-b-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-3-b-8">8</span>
session_name("sesiones-2-3-b");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario Palabra en mayúsculas (Formulario)&lt;/h1&gt;

  &lt;form action="sesiones-2-3-b-2.php" method="get"&gt;

&lt;?php
//Si hay guardada una palabra en la sesión ... <span class="numero-circulo" tooltip-id="li-3-b-12">12</span>
if (isset($_SESSION["palabra"])) {
    // ... mostramos la palabra
    print "  &lt;p&gt;Ha escrito una palabra en mayúsculas: &lt;strong&gt;$_SESSION[palabra]&lt;/strong&gt;.&lt;/p&gt;\n";
    print "\n";
}

print "    &lt;p&gt;Escriba una palabra en mayúsculas:&lt;/p&gt;\n";
print "\n";

if (isset($_SESSION["error"], $_SESSION["intento"])) {
    // Si hemos detectado un error y el usuario había escrito una palabra para corregir <span class="numero-circulo" tooltip-id="li-3-b-9">9</span>
    // Mostramos el control, añadiendo el aviso e incluyendo el valor incorrecto en el control
    print "      &lt;label&gt;\n";
    print "        Escriba una palabra en mayúsculas:\n";
    print "        &lt;input type=\"text\" name=\"palabra\" value=\"$_SESSION[intento]\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[error]&lt;/span&gt;\n";
    print "    &lt;/p&gt;\n";
    print "\n";
} elseif (isset($_SESSION["error"])) {
    // Si hemos detectado un error, pero no hay palabra para corregir <span class="numero-circulo" tooltip-id="li-3-b-10">10</span>
    // Mostramos el control, añadiendo el aviso
    print "      &lt;label&gt;\n";
    print "        Escriba una palabra en mayúsculas:\n";
    print "        &lt;input type=\"text\" name=\"palabra\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[error]&lt;/span&gt;\n";
    print "    &lt;/p&gt;\n";
    print "\n";
} else {
    // Si no hemos detectado un error, mostramos simplemente el control <span class="numero-circulo" tooltip-id="li-3-b-11">11</span>
    print "    &lt;p&gt;\n";
    print "      &lt;label&gt;\n";
    print "        Escriba una palabra en mayúsculas:\n";
    print "        &lt;input type=\"text\" name=\"palabra\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "    &lt;/p&gt;\n";
    print "\n";
}
?&gt;
// ...</code>
</pre>
    </div>

    <p>sesiones-2-3-b-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-3-b-3">3</span>
session_name("sesiones-2-3-b");
session_start();

// Función de recogida de datos <span class="numero-circulo" tooltip-id="li-3-b-1">1</span>
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos la palabra
$palabra = recoge("palabra");

// Borramos todos los datos anteriores <span class="numero-circulo" tooltip-id="li-3-b-2">2</span>
unset($_SESSION["intento"]);
unset($_SESSION["error"]);
unset($_SESSION["palabra"]);

// Comprobamos la palabra
if ($palabra == "") {
    // Si no se recibe palabra, guardamos en la sesión el mensaje de error <span class="numero-circulo" tooltip-id="li-3-b-4">4</span>
    $_SESSION["error"] = "No ha escrito ninguna palabra";
} elseif (!ctype_upper($palabra)) {
    // Si la palabra está en minúsculas, guardamos en la sesión el mensaje de error y el intento anterior <span class="numero-circulo" tooltip-id="li-3-b-5">5</span>
    $_SESSION["error"]   = "No ha escrito la palabra en mayúsculas";
    $_SESSION["intento"] = $palabra;
} else {
    // Si la palabra es correcta, borramos el error anterior que pudiera haber en la sesión <span class="numero-circulo" tooltip-id="li-3-b-6">6</span>
    $_SESSION["palabra"] = $palabra;
}

// Volvemos al formulario <span class="numero-circulo" tooltip-id="li-3-b-7">7</span>
header("Location:sesiones-2-3-b-1.php");</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-3-c">
    <h3>Sesiones (2) 3 - Formulario Palabra en mayúsculas - Solución C</h3>

    <p>Esta solución es una variante de la anterior. La segunda página es igual, la diferencia está en la primera página. En vez de escribir un control completo distinto dependiendo de las variables guardadas en la sesión de la solución B, en esta solución el control se escribe en varios <span class="php-res">print</span> y entre medias se escriben bloques <span class="php-res">if</span> que añaden texto en caso necesario.</p>

    <p>Este podría ser el orden en que se iría realizando este ejercicio:</p>

    <ol>
      <li id="li-3-c-1">En la página 2 recogemos el dato enviado por el formulario de la página 1: función recoge() y variable para recoger el dato</li>
      <li id="li-3-c-2">Borramos todas las variables de sesión establecidas anteriormente.</li>
      <li id="li-3-c-3">Por tanto, la página 2 debe conectarse a la sesión.</li>
      <li id="li-3-c-4">En la comprobación, si el dato es vacío, se guarda el aviso correspondiente.</li>
      <li id="li-3-c-5">Si la palabra no está en mayúsculas, se guarda el aviso correspondiente y la palabra escrita por el usuario (para mostrarla en la caja de texto).</li>
      <li id="li-3-c-6">Si la palabra es correcta, se guarda la palabra escrita por el usuario.</li>
      <li id="li-3-c-7">Finalmente, volvemos a la primera página.</li>
      <li id="li-3-c-8">La página 1 debe conectarse a la sesión.</li>
      <li id="li-3-c-9">Si hay un intento guardados en la sesión, añadimos el atributo <span class="html-atri">value</span>.</li>
      <li id="li-3-c-10">Si hay un error guardado en la sesión, añadimos el error.</li>
      <li id="li-3-c-11">Si hay una palabra guardada en la sesión, la palabra correcta debe mostrarse antes del formulario (ya que la palabra sólo se guarda cuando es correcta).</li>
    </ol>

    <p>sesiones-2-3-c-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-3-c-8">8</span>
session_name("sesiones-2-3-c");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario Palabra en mayúsculas (Formulario)&lt;/h1&gt;

  &lt;form action="sesiones-2-3-c-2.php" method="get"&gt;

&lt;?php
//Si hay guardada una palabra en la sesión ... <span class="numero-circulo" tooltip-id="li-3-c-11">11</span>
if (isset($_SESSION["palabra"])) {
    // ... mostramos la palabra
    print "    &lt;p&gt;Ha escrito una palabra en mayúsculas: &lt;strong&gt;$_SESSION[palabra]&lt;/strong&gt;.&lt;/p&gt;\n";
    print "\n";
}

print "    &lt;p&gt;\n";
print "      &lt;label&gt;\n";
print "        Escriba una palabra en mayúsculas:\n";
print "        &lt;input type=\"text\" name=\"palabra\" ";

// Si hay que incluir el intento anterior en value, lo incluimos <span class="numero-circulo" tooltip-id="li-3-c-9">9</span>
if (isset($_SESSION["intento"])) {
    print "value=\"$_SESSION[intento]\" ";
}

print "size=\"20\" maxlength=\"20\"&gt;\n";
print "      &lt;/label&gt;\n";

// Si hay que incluir un aviso, lo incluimos <span class="numero-circulo" tooltip-id="li-3-c-10">10</span>
if (isset($_SESSION["error"])) {
    print "&lt;span class=\"aviso\"&gt;$_SESSION[error]&lt;/span&gt;&lt;/p&gt;\n";
}

print "\n";
?&gt;
// ...</code>
</pre>
    </div>

    <p>sesiones-2-3-c-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-3-c-3">3</span>
session_name("sesiones-2-3-c");
session_start();

// Función de recogida de datos <span class="numero-circulo" tooltip-id="li-3-c-1">1</span>
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos la palabra
$palabra = recoge("palabra");

// Borramos todos los datos anteriores <span class="numero-circulo" tooltip-id="li-3-c-2">2</span>
unset($_SESSION["intento"]);
unset($_SESSION["error"]);
unset($_SESSION["palabra"]);

// Comprobamos la palabra
if ($palabra == "") {
    // Si no se recibe palabra, guardamos en la sesión el mensaje de error <span class="numero-circulo" tooltip-id="li-3-c-4">4</span>
    $_SESSION["error"] = "No ha escrito ninguna palabra";
} elseif (!ctype_upper($palabra)) {
    // Si la palabra está en minúsculas, guardamos en la sesión el mensaje de error y el intento anterior <span class="numero-circulo" tooltip-id="li-3-c-5">5</span>
    $_SESSION["error"]   = "No ha escrito la palabra en mayúsculas";
    $_SESSION["intento"] = $palabra;
} else {
    // Si la palabra es correcta, borramos el error anterior que pudiera haber en la sesión <span class="numero-circulo" tooltip-id="li-3-c-6">6</span>
    $_SESSION["palabra"] = $palabra;
}

// Volvemos al formulario <span class="numero-circulo" tooltip-id="li-3-c-7">7</span>
header("Location:sesiones-2-3-c-1.php");</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-3-d">
    <h3>Sesiones (2) 3 - Formulario Palabra en mayúsculas - Solución D</h3>

    <p>Esta solución es una variante de la anterior, en la que sólo cambia la segunda página. En vez de borrar todas las variables de sesión anteriores y en el bloque <span class="php-res">if elseif else</span> establecer las variables necesarias, en esta solución en cada opción del bloque <span class="php-res">if elseif else</span> se borran o establecen cada una de las variables de la sesión.</p>

    <p>Este podría ser el orden en que se iría realizando este ejercicio:</p>

    <ol>
      <li id="li-3-d-1">En la página 2 recogemos el dato enviado por el formulario de la página 1: función recoge() y variable para recoger el dato</li>
      <li id="li-3-d-2">En la comprobación, si el dato es vacío, se guarda el aviso correspondiente y se borran el intento y la palabra anteriores.</li>
      <li id="li-3-d-3">Si la palabra no está en mayúsculas, se guarda el aviso correspondiente y el intento y se borra la palabra anterior.</li>
      <li id="li-3-d-4">Si la palabra es correcta, se guarda la palabra escrita por el usuario y se borran el intento y el error anteriores.</li>
      <li id="li-3-d-5">Por tanto, la página 2 debe conectarse a la sesión.</li>
      <li id="li-3-d-6">Finalmente, volvemos a la primera página.</li>
    </ol>

    <p>sesiones-2-3-d-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-3-d-5">5</span>
session_name("sesiones-2-3-d");
session_start();

// Función de recogida de datos <span class="numero-circulo" tooltip-id="li-3-d-1">1</span>
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos la palabra
$palabra = recoge("palabra");

// Comprobamos la palabra, guardamos el dato que queremos enseñar y borramos el resto
if ($palabra == "") {
    // Si no se recibe palabra, guardamos en la sesión el mensaje de error <span class="numero-circulo" tooltip-id="li-3-d-2">2</span>
    unset($_SESSION["intento"]);
    $_SESSION["error"] = "No ha escrito ninguna palabra";
    unset($_SESSION["palabra"]);
} elseif (!ctype_upper($palabra)) {
    // Si la palabra está en minúsculas, guardamos en la sesión el mensaje de error y el intento anterior <span class="numero-circulo" tooltip-id="li-3-d-3">3</span>
    $_SESSION["intento"] = $palabra;
    $_SESSION["error"]   = "No ha escrito la palabra en mayúsculas";
    unset($_SESSION["palabra"]);
} else {
    // Si la palabra es correcta, guardamos en la sesión la palabra <span class="numero-circulo" tooltip-id="li-3-d-4">4</span>
    unset($_SESSION["intento"]);
    unset($_SESSION["error"]);
    $_SESSION["palabra"] = $palabra;
}

// Volvemos al formulario <span class="numero-circulo" tooltip-id="li-3-d-6">6</span>
header("Location:sesiones-2-3-d-1.php");</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-4">
    <h3>Sesiones (2) 4 - Formulario Palabras en mayúsculas y minúsculas - Solución A</h3>

    <p>Este ejercicio es parecido al anterior. La diferencia es que como hay dos controles, tenemos el doble de variables de sesión. Además, hay que tener en cuenta que si un control se escribe bien, pero el otro se escribe mal, el valor correcto se debe incluir en el control para que el usuario no lo tenga que volver a escribir.</p>

    <ol style="display: none">
      <li id="li-4-1">Por escribir</li>
      <li id="li-4-2">Por escribir</li>
      <li id="li-4-3">Por escribir</li>
      <li id="li-4-4">Por escribir</li>
      <li id="li-4-5">Por escribir</li>
      <li id="li-4-6">Por escribir</li>
      <li id="li-4-7">Por escribir</li>
      <li id="li-4-8">Por escribir</li>
      <li id="li-4-9">Por escribir</li>
      <li id="li-4-10">Por escribir</li>
      <li id="li-4-11">Por escribir</li>
      <li id="li-4-12">Por escribir</li>
      <li id="li-4-13">Por escribir</li>
      <li id="li-4-14">Por escribir</li>
    </ol>

    <p>sesiones-2-4-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-4-9">9</span>
session_name("sesiones-2-4");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario Palabras en mayúsculas y minúsculas (Formulario)&lt;/h1&gt;

  &lt;form action="sesiones-2-4-2.php" method="get"&gt;

&lt;?php
//Si no hemos detectado error en la palabra en mayúsculas y hay guardada una palabra en la sesión ... <span class="numero-circulo" tooltip-id="li-4-14">14</span>
if (
    !isset($_SESSION["mayusculasError"]) && !isset($_SESSION["minusculasError"])
    && isset($_SESSION["mayusculas"], $_SESSION["minusculas"])
) {
    // ... mostramos la palabra
    print "    &lt;p&gt;Ha escrito una palabra en mayúsculas: &lt;strong&gt;$_SESSION[mayusculas]&lt;/strong&gt;.&lt;/p&gt;\n";
    print "\n";
    print "    &lt;p&gt;Ha escrito una palabra en minúsculas: &lt;strong&gt;$_SESSION[minusculas]&lt;/strong&gt;.&lt;/p&gt;\n";
    print "\n";
}

print "    &lt;p&gt;Escriba una palabra en mayúsculas y otra en minúsculas:&lt;/p&gt;\n";
print "\n";

// Si hemos detectado un error en la palabra en mayúsculas
if (isset($_SESSION["mayusculasError"])) {
    // Escribimos un aviso e incluimos el valor incorrecto en el control <span class="numero-circulo" tooltip-id="li-4-10">10</span>
    print "    &lt;p&gt;\n";
    print "      &lt;label&gt;\n";
    print "        Mayúsculas:\n";
    print "        &lt;input type=\"text\" name=\"mayusculas\" value=\"$_SESSION[mayusculas]\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[mayusculasError]&lt;/span&gt;\n";
    print "    &lt;/p&gt;\n";
    print "\n";
} elseif (isset($_SESSION["minusculasError"])) {
    // Si hemos detectado un error en la palabra en minúsculas, incluimos el valor correcto en el control <span class="numero-circulo" tooltip-id="li-4-11">11</span>
    print "    &lt;p&gt;\n";
    print "      &lt;label&gt;\n";
    print "        Mayúsculas:\n";
    print "        &lt;input type=\"text\" name=\"mayusculas\" value=\"$_SESSION[mayusculas]\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "     &lt;/p&gt;\n";
    print "\n";
} else {
    // Si no hemos detectado un error, escribimos el control vacío <span class="numero-circulo" tooltip-id="li-4-12">12</span>
    print "    &lt;p&gt;\n";
    print "      &lt;label&gt;\n";
    print "        Mayúsculas:\n";
    print "        &lt;input type=\"text\" name=\"mayusculas\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "    &lt;/p&gt;\n";
    print "\n";
}

// Si hemos detectado un error en la palabra en minúsculas <span class="numero-circulo" tooltip-id="li-4-13">13</span>
if (isset($_SESSION["minusculasError"])) {
    // Escribimos un aviso e incluimos el valor incorrecto en el control
    print "    &lt;p&gt;\n";
    print "      &lt;label&gt;\n";
    print "        Minúsculas:\n";
    print "        &lt;input type=\"text\" name=\"minusculas\" value=\"$_SESSION[minusculas]\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[minusculasError]&lt;/span&gt;\n";
    print "    &lt;/p&gt;\n";
    print "\n";
} elseif (isset($_SESSION["mayusculasError"])) {
    // Si hemos detectado un error en la palabra en mayúsculas, incluimos el valor correcto en el control
    print "    &lt;p&gt;\n";
    print "      &lt;label&gt;\n";
    print "        Minúsculas:\n";
    print "        &lt;input type=\"text\" name=\"minusculas\" value=\"$_SESSION[minusculas]\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "    &lt;/p&gt;\n";
    print "\n";
} else {
    // Si no hemos detectado un error, escribimos el control vacío
    print "    &lt;p&gt;\n";
    print "      &lt;label&gt;\n";
    print "        Minúsculas:\n";
    print "        &lt;input type=\"text\" name=\"minusculas\" size=\"20\" maxlength=\"20\"&gt;\n";
    print "      &lt;/label&gt;\n";
    print "    &lt;/p&gt;\n";
    print "\n";
}
?&gt;
// ...</code>
</pre>
    </div>

    <p>sesiones-2-4-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-4-3">3</span>
session_name("sesiones-2-4");
session_start();

// Función de recogida de datos <span class="numero-circulo" tooltip-id="li-4-1">1</span>
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos las dos palabras
$mayusculas = recoge("mayusculas");
$minusculas = recoge("minusculas");

// Guardamos las palabras en la sesión <span class="numero-circulo" tooltip-id="li-4-2">2</span>
$_SESSION["mayusculas"] = $mayusculas;
$_SESSION["minusculas"] = $minusculas;

// Comprobamos la palabra en mayúsculas
if ($mayusculas == "") {
    // Si no se recibe palabra, guardamos en la sesión el mensaje de error <span class="numero-circulo" tooltip-id="li-4-4">4</span>
    $_SESSION["mayusculasError"] = "No ha escrito ninguna palabra";
} elseif (!ctype_upper($mayusculas)) {
    // Si la palabra está en minúsculas, guardamos en la sesión el mensaje de error <span class="numero-circulo" tooltip-id="li-4-5">5</span>}
    $_SESSION["mayusculasError"] = "No ha escrito la palabra en mayúsculas";
} else {
    // Si la palabra es correcta, borramos los posibles errores anteriores <span class="numero-circulo" tooltip-id="li-4-6">6</span>
    unset($_SESSION["mayusculasError"]);
}

// Comprobamos la palabra en minúsculas <span class="numero-circulo" tooltip-id="li-4-7">7</span>
if ($minusculas == "") {
    // Si no se recibe palabra, guardamos en la sesión el mensaje de error
    $_SESSION["minusculasError"] = "No ha escrito ninguna palabra";
} elseif (!ctype_lower($minusculas)) {
    // Si la palabra está en mayúsculas, guardamos en la sesión el mensaje de error
    $_SESSION["minusculasError"] = "No ha escrito la palabra en minúsculas";
} else {
    // Si la palabra es correcta, borramos los posibles errores anteriores
    unset($_SESSION["minusculasError"]);
}

// Volvemos al formulario <span class="numero-circulo" tooltip-id="li-4-8">8</span>
header("Location:sesiones-2-4-1.php");</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-4-b">
    <h3>Sesiones (2) 4 - Formulario Palabras en mayúsculas y minúsculas - Solución B</h3>

    <p>Como en el caso del ejercicio 3, en el que se han ofrecido varias soluciones, esta solución es algo distinta a la anterior.</p>

    <ol style="display: none">
      <li id="li-4-b-1">Por escribir</li>
      <li id="li-4-b-2">Por escribir</li>
      <li id="li-4-b-3">Por escribir</li>
      <li id="li-4-b-4">Por escribir</li>
      <li id="li-4-b-5">Por escribir</li>
      <li id="li-4-b-6">Por escribir</li>
      <li id="li-4-b-7">Por escribir</li>
      <li id="li-4-b-8">Por escribir</li>
      <li id="li-4-b-9">Por escribir</li>
      <li id="li-4-b-10">Por escribir</li>
      <li id="li-4-b-11">Por escribir</li>
      <li id="li-4-b-12">Por escribir</li>
      <li id="li-4-b-13">Por escribir</li>
      <li id="li-4-b-14">Por escribir</li>
    </ol>

    <p>sesiones-2-4-b-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-4-b-9">9</span>
session_name("sesiones-2-4-b");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario Palabras en mayúsculas y minúsculas (Formulario)&lt;/h1&gt;

  &lt;form action="sesiones-2-4-b-2.php" method="get"&gt;

&lt;?php
//Si están guardadas en la sesión las dos palabras ... <span class="numero-circulo" tooltip-id="li-4-b-14">14</span>
if (isset($_SESSION["mayusculas"], $_SESSION["minusculas"]) ) {
    // ... mostramos las dos palabras
    print "    &lt;p&gt;Ha escrito una palabra en mayúsculas: &lt;strong&gt;$_SESSION[mayusculas]&lt;/strong&gt;.&lt;/p&gt;\n";
    print "\n";
    print "    &lt;p&gt;Ha escrito una palabra en minúsculas: &lt;strong&gt;$_SESSION[minusculas]&lt;/strong&gt;.&lt;/p&gt;\n";
    print "\n";
}

print "    &lt;p&gt;Escriba una palabra en mayúsculas y otra en minúsculas:&lt;/p&gt;\n";
print "\n";

print "    &lt;p&gt;\n";
print "      &lt;label&gt;\n";
print "        Mayúsculas:\n";
print "        &lt;input type=\"text\" name=\"mayusculas\" ";

if (isset($_SESSION["mayusculasIntento"])) {
    // Si hemos detectado un intento incorrecto en la palabra en mayúsculas, incluimos el intento en el control <span class="numero-circulo" tooltip-id="li-4-b-10">10</span>
    print "value=\"$_SESSION[mayusculasIntento]\" ";
} elseif (isset($_SESSION["minusculasError"], $_SESSION["mayusculas"])) {
    // Si la palabra en mayúsculas es correcta, pero hemos detectado un error en la palabra en minúsculas, incluimos la palabra correcta en el control <span class="numero-circulo" tooltip-id="li-4-b-11">11</span>
    print "value=\"$_SESSION[mayusculas]\" ";
}

print "size=\"20\" maxlength=\"20\"&gt;\n";
print "      &lt;/label&gt;\n";

// Si hemos detectado un error en la palabra en mayúsculas <span class="numero-circulo" tooltip-id="li-4-b-12">12</span>
if (isset($_SESSION["mayusculasError"])) {
    // Escribimos el aviso
    print "&lt;span class=\"aviso\"&gt;$_SESSION[mayusculasError]&lt;/span&gt;";
}

print "&lt;/p&gt;\n";
print "\n";

print "    &lt;p&gt;\n";
print "      &lt;label&gt;\n";
print "        Minúsculas:\n";
print "        &lt;input type=\"text\" name=\"minusculas\" ";

if (isset($_SESSION["minusculasIntento"])) {
    // Si hemos detectado un intento incorrecto en la palabra en minúsculas, incluimos el intento en el control <span class="numero-circulo" tooltip-id="li-4-b-13">13</span>
    print "value=\"$_SESSION[minusculasIntento]\" ";
} elseif (isset($_SESSION["mayusculasError"], $_SESSION["minusculas"])) {
    // Si la palabra en minúsculas es correcta, pero hemos detectado un error en la palabra en mayúsculas, incluimos la palabra correcta en el control
    print "value=\"$_SESSION[minusculas]\" ";
}

print "size=\"20\" maxlength=\"20\"&gt;\n";
print "      &lt;/label&gt;\n";


// Si hemos detectado un error en la palabra en minúsculas
if (isset($_SESSION["minusculasError"])) {
    // Escribimos el aviso
    print "&lt;span class=\"aviso\"&gt;$_SESSION[minusculasError]&lt;/span&gt;";
}

print "&lt;/p&gt;\n";
print "\n";
?&gt;
// ...</code>
</pre>
    </div>

    <p>sesiones-2-4-b-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión <span class="numero-circulo" tooltip-id="li-4-b-3">3</span>
session_name("sesiones-2-4-b");
session_start();

// Función de recogida de datos <span class="numero-circulo" tooltip-id="li-4-b-1">1</span>
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos las dos palabras
$mayusculas = recoge("mayusculas");
$minusculas = recoge("minusculas");

// Borramos los valores anteriores <span class="numero-circulo" tooltip-id="li-4-b-2">2</span>
session_unset();

// Comprobamos la palabra en mayúsculas
if ($mayusculas == "") {
    // Si no se recibe palabra, guardamos en la sesión el mensaje de error <span class="numero-circulo" tooltip-id="li-4-b-4">4</span>
    $_SESSION["mayusculasError"] = "No ha escrito ninguna palabra";
} elseif (!ctype_upper($mayusculas)) {
    // Si la palabra está en minúsculas, guardamos en la sesión el mensaje de error y la palabra <span class="numero-circulo" tooltip-id="li-4-b-5">5</span>
    $_SESSION["mayusculasIntento"] = $mayusculas;
    $_SESSION["mayusculasError"]   = "No ha escrito la palabra en mayúsculas";
} else {
    // Si la palabra es correcta, guardamos en la sesión la palabra <span class="numero-circulo" tooltip-id="li-4-b-6">6</span>
    $_SESSION["mayusculas"] = $mayusculas;
}

// Comprobamos la palabra en minúsculas <span class="numero-circulo" tooltip-id="li-4-b-7">7</span>
if ($minusculas == "") {
    // Si no se recibe palabra, guardamos en la sesión el mensaje de error
    $_SESSION["minusculasError"] = "No ha escrito ninguna palabra";
} elseif (!ctype_lower($minusculas)) {
    // Si la palabra está en mayúsculas, guardamos en la sesión el mensaje de error y la palabra
    $_SESSION["minusculasIntento"] = $minusculas;
    $_SESSION["minusculasError"]   = "No ha escrito la palabra en minúsculas";
} else {
    // Si la palabra es correcta, guardamos en la sesión la palabra
    $_SESSION["minusculas"] = $minusculas;
}

// Volvemos al formulario <span class="numero-circulo" tooltip-id="li-4-b-8">8</span>
header("Location:sesiones-2-4-1.php");</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-5">
    <h3>Sesiones (2) 5 - Formulario en dos pasos</h3>

    <p>sesiones-2-5-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-5");
session_start();

// Borrramos los datos guardados en intentos anteriores
// salvo el avisoNombre que puede tener que mostrarse en esta página
unset($_SESSION["nombre"]);
unset($_SESSION["apellidos"]);
unset($_SESSION["avisoApellidos"]);
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario en dos pasos (Formulario 1)&lt;/h1&gt;

  &lt;form action="sesiones-2-5-2.php" method="get"&gt;
    &lt;p&gt;Escriba su nombre:&lt;/p&gt;

    &lt;p&gt;
      &lt;label&gt;
        Nombre:
        &lt;input type="text" name="nombre" size="20" maxlength="20"&gt;
      &lt;/label&gt;
&lt;?php
// Si hay un aviso guardado en la sesión, lo mostramos
if (isset($_SESSION["avisoNombre"])) {
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[avisoNombre]&lt;/span&gt;\n";
}
?&gt;
    &lt;/p&gt;

// ...</code>
</pre>
    </div>

    <p>sesiones-2-5-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-5");
session_start();

// Función de recogida de datos
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos el nombre
$nombre = recoge("nombre");

// Comprobamos el nombre
if ($nombre == "") {
    // Si no hay nombre, guardamos el aviso en la sesión
    $_SESSION["avisoNombre"] = "No ha escrito su nombre";
    // y volvemos a la página 1
    header("Location:sesiones-2-5-1.php");
    exit;
} else {
    // Si hay nombre, borramos el aviso que se podría haber generado en intentos anteriores,
    unset($_SESSION["avisoNombre"]);
    // guardamos el nombre en la sesión
    $_SESSION["nombre"] = $nombre;
    // y pasamos a la página 3
    header("Location:sesiones-2-5-3.php");
    exit;
}</code>
</pre>
    </div>

    <p>sesiones-2-5-3.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-5");
session_start();

// Si accedemos a esta página sin haber guardado antes un nombre en la sesión ...
if (!isset($_SESSION["nombre"])) {
    // volvemos a la página 1
    header("Location:sesiones-2-5-1.php");
    exit;
}
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario en dos pasos (Formulario 2)&lt;/h1&gt;

  &lt;form action="sesiones-2-5-4.php" method="get"&gt;
    &lt;p&gt;Escriba sus apellidos:&lt;/p&gt;

    &lt;p&gt;
      &lt;label&gt;
        Apellidos:
        &lt;input type="text" name="apellidos" size="30" maxlength="30"&gt;
&lt;?php
// Si hay un aviso guardado en la sesión, lo mostramos
if (isset($_SESSION["avisoApellidos"])) {
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[avisoApellidos]&lt;/span&gt;\n";
}
?&gt;
      &lt;/label&gt;
    &lt;/p&gt;

// ...</code>
</pre>
    </div>

    <p>sesiones-2-5-4.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-5");
session_start();

// Si accedemos a esta página sin haber guardado antes un nombre en la sesión ...
if (!isset($_SESSION["nombre"])) {
    // volvemos a la página 1
    header("Location:sesiones-2-5-1.php");
    exit;
}

// Función de recogida de datos
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos los apellidos
$apellidos = recoge("apellidos");

if ($apellidos == "") {
    // Si no hay apellidos, guardamos el aviso en la sesión
    $_SESSION["avisoApellidos"] = "No ha escrito sus apellidos";
    // y volvemos a la página 3
    header("Location:sesiones-2-5-3.php");
    exit;
} else {
    // Si hay apellidos, borramos el aviso que se podría haber generado en intentos anteriores,
    unset($_SESSION["avisoApellidos"]);
    // guardamos los apellidos en la sesión
    $_SESSION["apellidos"] = $apellidos;
    // y pasamos a la página 5
    header("Location:sesiones-2-5-5.php");
    exit;
}</code>
</pre>
    </div>

    <p>sesiones-2-5-5.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-5");
session_start();

// Si accedemos a esta página sin haber guardado antes un nombre y unos apellidos en la sesión ...
if (!isset($_SESSION["nombre"]) || !isset($_SESSION["apellidos"])) {
    // volvemos a la página 1
    header("Location:sesiones-2-5-1.php");
    exit;
}
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario en dos pasos (Resultado)&lt;/h1&gt;

&lt;?php
// Mostramos los datos recibidos
print "  &lt;p&gt;Su nombre y apellidos son: &lt;strong&gt;$_SESSION[nombre] $_SESSION[apellidos]&lt;/strong&gt;.&lt;/p&gt;\n";
print "\n";
?&gt;
// ...</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-6">
    <h3>Sesiones (2) 6 - Formulario de confirmación</h3>

    <p>sesiones-2-6-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-6");
session_start();

// Borrramos los datos guardados en intentos anteriores
// salvo el aviso1 que puede tener que mostrarse en esta página
unset($_SESSION["palabra1"]);
unset($_SESSION["palabra2"]);
unset($_SESSION["aviso2"]);
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario de confirmación (Formulario 1)&lt;/h1&gt;

  &lt;form action="sesiones-2-6-2.php" method="get"&gt;
    &lt;p&gt;Escriba una palabra (con letras mayúsculas, letras minúsculas y números):&lt;/p&gt;

    &lt;p&gt;
      &lt;label&gt;
        Palabra:
        &lt;input type="text" name="palabra1" size="20" maxlength="20"&gt;
      &lt;/label&gt;
&lt;?php
// Si hay un aviso guardado en la sesión, lo mostramos
if (isset($_SESSION["aviso1"])) {
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[aviso1]&lt;/span&gt;\n";
}
?&gt;
    &lt;/p&gt;

// ...</code>
</pre>
    </div>

    <p>sesiones-2-6-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-6");
session_start();

// Función de recogida de datos
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos la palabra1
$palabra1 = recoge("palabra1");

// Comprobamos la palabra1
if ($palabra1 == "") {
    // Si no hay palabra1, guardamos el aviso en la sesión
    $_SESSION["aviso1"] = "No ha escrito nada";
    // y volvemos a la página 1
    header("Location:sesiones-2-6-1.php");
    exit;
} elseif (!ctype_alnum($palabra1)) {
    // Si la palabra1 no son todo letras o números, guardamos el aviso en la sesión
    $_SESSION["aviso1"] = "No ha escrito una sola palabra con letras y números";
    // y volvemos a la página 1
    header("Location:sesiones-2-6-1.php");
    exit;
} else {
    // Si hay palabra1, borramos el aviso que se podría haber generado en intentos anteriores,
    unset($_SESSION["aviso1"]);
    // guardamos la palabra1 en la sesión
    $_SESSION["palabra1"] = $palabra1;
    // y pasamos a la página 3
    header("Location:sesiones-2-6-3.php");
    exit;
}</code>
</pre>
    </div>

    <p>sesiones-2-6-3.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-6");
session_start();

// Si accedemos a esta página sin haber guardado antes la palabra1 en la sesión ...
if (!isset($_SESSION["palabra1"])) {
    // volvemos a la página 1
    header("Location:sesiones-2-6-1.php");
    exit;
}
?&gt;
&lt;!DOCTYPE html&gt;
// ...

&lt;body&gt;
  &lt;h1&gt;Formulario de confirmación (Formulario 2)&lt;/h1&gt;

  &lt;form action="sesiones-2-6-4.php" method="get"&gt;
    &lt;p&gt;Repita la palabra que acaba de escribir:&lt;/p&gt;

    &lt;p&gt;
      &lt;label&gt;
        Palabra:
        &lt;input type="text" name="palabra1" size="20" maxlength="20"&gt;
      &lt;/label&gt;
&lt;?php
// Si hay un aviso guardado en la sesión, lo mostramos
if (isset($_SESSION["aviso2"])) {
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[aviso2]&lt;/span&gt;\n";
}
?&gt;
    &lt;/p&gt;

// ...</code>
</pre>
    </div>

    <p>sesiones-2-6-4.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-6");
session_start();

// Si accedemos a esta página sin haber guardado antes una palabra1 en la sesión ...
if (!isset($_SESSION["palabra1"])) {
    // volvemos a la página 1
    header("Location:sesiones-2-6-1.php");
    exit;
}

// Función de recogida de datos
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos la palabra2
$palabra2 = recoge("palabra2");

if ($palabra2 == "") {
    // Si no hay palabra2, guardamos el aviso en la sesión
    $_SESSION["aviso2"] = "No ha escrito nada";
    // y volvemos a la página 3
    header("Location:sesiones-2-6-3.php");
    exit;
} elseif (!ctype_alnum($palabra2)) {
    // Si la palabra2 no son todo letras o números, guardamos el aviso en la sesión
    $_SESSION["aviso2"] = "No ha escrito una sola palabra con letras y números";
    // y volvemos a la página 3
    header("Location:sesiones-2-6-3.php");
    exit;
} elseif ($_SESSION["palabra1"] != $palabra2) {
    // Si las palabras son distintas, borramos el aviso que se podría haber generado en intentos anteriores,
    unset($_SESSION["aviso2"]);
    // Guardamos el aviso en la sesión
    $_SESSION["aviso1"] = "No ha escrito la misma palabra. Comience de nuevo.";
    // y volvemos a la página 1
    header("Location:sesiones-2-6-1.php");
    exit;
} else {
    // Si hay palabra2, borramos el aviso que se podría haber generado en intentos anteriores,
    unset($_SESSION["aviso2"]);
    // guardamos la palabra2 en la sesión
    $_SESSION["palabra2"] = $palabra2;
    // y pasamos a la página 5
    header("Location:sesiones-2-6-5.php");
    exit;
}</code>
</pre>
    </div>

    <p>sesiones-2-6-5.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-6");
session_start();

// Si accedemos a esta página sin haber guardado antes la palabra1 y la palabra2 en la sesión ...
if (!isset($_SESSION["palabra1"]) || !isset($_SESSION["palabra2"])) {
    // volvemos a la página 1
    header("Location:sesiones-2-5-1.php");
    exit;
}
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Formulario de confirmación (Resultado)&lt;/h1&gt;

&lt;?php
// Mostramos la palabra confirmada
print "  &lt;p&gt;Ha escrito y confirmado la palabra: &lt;strong&gt;$_SESSION[palabra1]&lt;/strong&gt;.&lt;/p&gt;\n";
print "\n";
?&gt;
// ...</code>
</pre>
    </div>
  </section>

  <section id="ejercicio-7">
    <h3>Sesiones (2) 7 - Formularios independientes</h3>

    <p>index.php</p>

    <p>La página index.php no contiene código PHP.</p>

    <p>nombre-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-7");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Nombre (1)&lt;/h1&gt;

&lt;?php
// Si hay un nombre guardado en la sesión, ...
if (isset($_SESSION["nombre"])) {
    // lo mostramos
    print "  &lt;p&gt;Usted ya ha escrito que su nombre es: &lt;strong&gt;$_SESSION[nombre]&lt;/strong&gt;&lt;/p&gt;\n";
    print "\n";
}
?&gt;
  &lt;form action="nombre-2.php" method="get"&gt;
    &lt;p&gt;Escriba su nombre:&lt;/p&gt;

    &lt;p&gt;
      &lt;label&gt;
        Nombre:
        &lt;input type="text" name="nombre" size="20" maxlength="20"&gt;
      &lt;/label&gt;
&lt;?php
// Si hay un aviso guardado en la sesión, lo mostramos
if (isset($_SESSION["avisoNombre"])) {
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[avisoNombre]&lt;/span&gt;\n";
}
?&gt;
    &lt;/p&gt;

// ...</code>
</pre>
    </div>

    <p>nombre-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-7");
session_start();

// Función de recogida de datos
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos el nombre
$nombre = recoge("nombre");

if ($nombre == "") {
    // Si no hay nombre, guardamos el aviso en la sesión
    $_SESSION["avisoNombre"] = "No ha escrito su nombre";
    // y volvemos a la página nombre-1
    header("Location:nombre-1.php");
    exit;
} else {
    // Si hay nombre, borramos el aviso que se podría haber generado en intentos anteriores,
    unset($_SESSION["avisoNombre"]);
    // guardamos el nombre en la sesión
    $_SESSION["nombre"] = $nombre;
    // y volvemos a index
    header("Location:index.php");
    exit;
}</code>
</pre>
    </div>

    <p>apellidos-1.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-7");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...
&lt;body&gt;
  &lt;h1&gt;Apellidos (1)&lt;/h1&gt;

&lt;?php
// Si hay unos apellidos guardados en la sesión, ...
if (isset($_SESSION["apellidos"])) {
    // lo mostramosn
    print "  &lt;p&gt;Usted ya ha escrito que sus apellidos son: &lt;strong&gt;$_SESSION[apellidos]&lt;/strong&gt;&lt;/p&gt;\n";
    print "\n";
}
?&gt;
  &lt;form action="apellidos-2.php" method="get"&gt;
    &lt;p&gt;Escriba sus apellidos:&lt;/p&gt;

    &lt;p&gt;
      &lt;label&gt;
        Apellidos:
        &lt;input type="text" name="apellidos" size="30" maxlength="30"&gt;
      &lt;/label&gt;
&lt;?php
// Si hay un aviso guardado en la sesión, lo mostramos
if (isset($_SESSION["avisoApellidos"])) {
    print "      &lt;span class=\"aviso\"&gt;$_SESSION[avisoApellidos]&lt;/span&gt;\n";
}
?&gt;
    &lt;/p&gt;

// ...</code>
</pre>
    </div>

    <p>apellidos-2.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-7");
session_start();

// Función de recogida de datos
function recoge($key, $type = "")
{
    if (!is_string($key) && !is_int($key) || $key == "") {
        trigger_error("Function recoge(): Argument #1 (\$key) must be a non-empty string or an integer", E_USER_ERROR);
    } elseif ($type !== "" && $type !== []) {
        trigger_error("Function recoge(): Argument #2 (\$type) is optional, but if provided, it must be an empty array or an empty string", E_USER_ERROR);
    }
    $tmp = $type;
    if (isset($_REQUEST[$key])) {
        if (!is_array($_REQUEST[$key]) && !is_array($type)) {
            $tmp = trim(htmlspecialchars($_REQUEST[$key]));
        } elseif (is_array($_REQUEST[$key]) && is_array($type)) {
            $tmp = $_REQUEST[$key];
            array_walk_recursive($tmp, function (&$value) {
                $value = trim(htmlspecialchars($value));
            });
        }
    }
    return $tmp;
}

// Recogemos los apellidos
$apellidos = recoge("apellidos");

if ($apellidos == "") {
    // Si no hay apellidos, guardamos el aviso en la sesión
    $_SESSION["avisoApellidos"] = "No ha escrito sus apellidos";
    // y volvemos a la página apellidos-1
    header("Location:apellidos-1.php");
    exit;
} else {
    // Si hay apellidos, borramos el aviso que se podría haber generado en intentos anteriores,
    unset($_SESSION["avisoApellidos"]);
    // guardamos los apellidos en la sesión
    $_SESSION["apellidos"] = $apellidos;
    // y volvemos a index
    header("Location:index.php");
    exit;
}</code>
</pre>
    </div>

    <p>ver.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-7");
session_start();
?&gt;
&lt;!DOCTYPE html&gt;
// ...

&lt;body&gt;
  &lt;h1&gt;Ver datos&lt;/h1&gt;

&lt;?php
if (!isset($_SESSION["nombre"]) &amp;&amp; !isset($_SESSION["apellidos"])) {
    // Si no hay nombre ni apellidos en la sesión, lo dice
    print "  &lt;p&gt;Usted no ha escrito todavía ni su nombre ni sus apellidos&lt;/p&gt;\n";
    print "\n";
} elseif (isset($_SESSION["nombre"]) &amp;&amp; !isset($_SESSION["apellidos"])) {
    // Si hay nombre pero no hay apellidos en la sesión, lo dice
    print "  &lt;p&gt;Usted &lt;strong&gt;sólo&lt;/strong&gt; ha escrito que su nombre es: &lt;strong&gt;$_SESSION[nombre]&lt;/strong&gt;&lt;/p&gt;\n";
    print "\n";
} elseif (!isset($_SESSION["nombre"]) &amp;&amp; isset($_SESSION["apellidos"])) {
    // Si no hay nombre pero sí apellidos en la sesión, lo dice
    print "  &lt;p&gt;Usted &lt;strong&gt;sólo&lt;/strong&gt; ha escrito que sus apellidos son: &lt;strong&gt;$_SESSION[apellidos]&lt;/strong&gt;&lt;/p&gt;\n";
    print "\n";
} else {
    // Si hay nombre y apellidos en la sesión, lo dice
    print "  &lt;p&gt;Usted ha escrito que su nombre es: &lt;strong&gt;$_SESSION[nombre]&lt;/strong&gt;&lt;/p&gt;\n";
    print "\n";
    print "  &lt;p&gt;Usted ha escrito que sus apellidos son: &lt;strong&gt;$_SESSION[apellidos]&lt;/strong&gt;&lt;/p&gt;\n";
    print "\n";
}
?&gt;
// ...</code>
</pre>
    </div>

    <p>borrar.php</p>

    <div class="codigo">
      <pre>
<code class="language-php">&lt;?php
// Accedemos a la sesión
session_name("sesiones-2-7");
session_start();
// Destruimos la sesión
session_destroy();
?&gt;
&lt;!DOCTYPE html&gt;
// ...</code>
</pre>
    </div>
  </section>

  <footer>
    <p class="ultmod">Última modificación de esta página: 29 de enero de 2026</p>

    <p class="licencia">
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es"><img src="../../../varios/iconos/icono-cc-by-sa.svg" alt="Licencia Creative Commons" title="Licencia Creative Commons BY-SA" width="120" height="42"></a><br>
      Esta página forma parte del curso <strong><a href="https://www.mclibre.org/consultar/php/">Programación web en PHP</a></strong> por <a href="https://www.mclibre.org/" rel="author">Bartolomé Sintes Marco</a><br>
      que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es">Licencia Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional (CC BY-SA 4.0)</a>.
    </p>
  </footer>
</body>
</html>

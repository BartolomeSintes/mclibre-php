<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>PHP. Perfil recomendado. Visual Studio Code. PHP. Bartolomé Sintes Marco. www.mclibre.org</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../varios/php.css" title="mclibre">
  <link rel="icon" href="../varios/favicon.svg">
  <link rel="stylesheet" href="../varios/prism.css">
  <script src="../varios/prism.js"></script>
</head>

<body>
  <h1>Visual Studio Code. Perfil recomendado para el curso Programación web en PHP</h1>

  <nav>
    <p>
      <a href="../index.html"><img src="../varios/iconos/icono-php.svg" alt="Índice de PHP" title="Índice de PHP" width="48" height="48"></a>
      <a href="#"><img src="../varios/iconos/icono-arrow-circle-up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36"></a>
    </p>

    <div class="toc">
      <h2>VSC: Perfil</h2>

      <ul>
        <li><a href="#perfil">Importar perfil</a></li>
        <li><a href="#area-trabajo">Área de trabajo</a></li>
        <li><a href="#seleccionar-perfil">Seleccionar perfil</a></li>
        <li><a href="#preferencias">Configuración</a></li>
        <li><a href="#php-cs-fixer">PHP CS Fixer</a></li>
      </ul>
    </div>
  </nav>

  <p>Visual Studio Code permite utilizar perfiles, lo que permite cambiar de forma sencilla entre distintas configuraciones (extensiones instaladas, preferencias, tareas, atajos y aspecto del interfaz). Además, los perfiles se pueden compartir, lo que facilita la puesta a punto del editor en distintos ordenadores. Por desgracia, los perfiles todavía tienen algunas limitaciones, por lo que la configuración a veces no puede ser completamente automática y requiere algunos pasos finales manuales.</p>

  <p>En esta lección se comenta cómo instalar y completar la configuración de un perfil que incluye tanto la <a href="vsc-php-configuracion.html">Configuración recomendada</a> para seguir este curso de PHP como la <a href="https://www.mclibre.org/consultar/htmlcss/otros/vsc-htmlcss-configuracion.html">Configuración recomendada</a> para seguir el curso de HTML y CSS. Consulte esas lecciones para conocer todo lo que incluye el perfil.</p>

  <p>Referencias:</p>
  <ul>
    <li>Documentación oficial <a href="https://code.visualstudio.com/docs/editor/profiles">Profiles in Visual Studio Code</a></li>
  </ul>

  <section id="perfil">
    <h2>Importar el perfil recomendado</h2>

    <p>La URL del perfil recomendado para seguir estos apuntes en Windows es: <a href="https://gist.github.com/BartolomeSintes/b2ad1d8c4e87bf8015c5c136a095134f">https://gist.github.com/BartolomeSintes/b2ad1d8c4e87bf8015c5c136a095134f</a> <img src="../varios/iconos/icono-copy.svg" alt="copiar en portapapeles" title="copiar en portapapeles" width="36" height="36" onclick="navigator.clipboard.writeText('https://gist.github.com/BartolomeSintes/b2ad1d8c4e87bf8015c5c136a095134f');" style="cursor: pointer;"> (actualizado el 14 de septiembre de 2023).</p>

    <p>Una vez importado este perfil en Visual Studio Code, se requieren un par de ajustes adicionales que se comentan en los apartados siguientes.</p>

    <hr class="corta">

    <p>Para importar el perfil de Visual Studio Code recomendado para este curso ...</p>
    <ul>
      <li>Haga clic en la rueda dentada y elija la opción <span class="soft-menu">Perfiles</span>:
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-1.png" alt="VSC. Importar perfil recomendado" width="1024" height="350">
        </p>
      </li>
      <li>Se abrirá la pestaña de administración de los perfiles (con el título <strong>Perfiles</strong>):
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-2.png" alt="VSC. Importar perfil recomendado" width="1024" height="410">
        </p>
      </li>
      <li>Haga clic en el triángulo situado a la derecha en el botón Perfiles y elija la opción <span class="soft-menu">Importar perfil ...</span>:
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-3.png" alt="VSC. Importar perfil recomendado" width="1024" height="230">
        </p>
      </li>
      <li>Se abrirá una caja de texto para escribir la URL del perfil compartido:
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-4.png" alt="VSC. Importar perfil recomendado" width="1024" height="220">
        </p>
      </li>
      <li>La URL del perfil recomendado para seguir estos apuntes en Windows es: <a href="https://gist.github.com/BartolomeSintes/b2ad1d8c4e87bf8015c5c136a095134f">https://gist.github.com/BartolomeSintes/b2ad1d8c4e87bf8015c5c136a095134f</a> <img src="../varios/iconos/icono-copy.svg" alt="copiar en portapapeles" title="copiar en portapapeles" width="36" height="36" onclick="navigator.clipboard.writeText('https://gist.github.com/BartolomeSintes/b2ad1d8c4e87bf8015c5c136a095134f');" style="cursor: pointer;"> (actualizado el 14 de septiembre de 2023).</li>
      <li>Copie y pegue el enlace en la caja de texto y pulse <kbd>Intro</kbd>:
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-5.png" alt="VSC. Importar perfil recomendado" width="1024" height="175">
        </p>
      </li>
      <li>Se mostrará el nuevo perfil en la lista de perfiles de la izquierda y la información sobre el contenido del perfil en la parte dercha de la ventana:
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-6.png" alt="VSC. Importar perfil recomendado" width="1024" height="576">
        </p>
      </li>
      <li>El nombre del perfil se mostrará en una caja de texto:
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-7.png" alt="VSC. Importar perfil recomendado" width="1024" height="230">
        </p>
      </li>
      <li>Ese nombre se puede cambiar, por ejemplo, por un nombre más corto. Es aconsejable que el nombre de cada perfil empiece de forma distinta (el motivo se explica en el apartado siguiente, al seleccionar el perfil). Para terminar, haga clic en el botón "Crear".
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-8.png" alt="VSC. Importar perfil recomendado" width="1024" height="576">
        </p>
      </li>
      <li>El perfil creado se mostrará en la lista de perfiles del lado izquierdo. Los detalles del perfil se muestran en el lado derecho. Fíjese en que al crear un perfil este no se selecciona automáticamente (en la captura, el perfil seleccionado sigue siendo el perfil predeterminado).
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-9.png" alt="VSC. Importar perfil recomendado" width="1024" height="245">
        </p>
      </li>
    </ul>

    <p>Una vez importado este perfil en Visual Studio Code, se requieren un par de ajustes adicionales que se comentan en los apartados siguientes. Aunque uno de los ajustes no requiere haber seleccionado una carpeta o área de trabajo, el otro sí lo requiere, por lo que se recomienda seleccionar una carpeta o un área de trabajo antes de completar la configuración del perfil.</p>
  </section>

  <section id="area-trabajo">
    <h2>Área de trabajo</h2>

    <p>En este curso <a href="https://www.mclibre.org/consultar/php/index.html">Iniciación a la programación de páginas web en PHP</a> de <a href="https://www.mclibre.org/">mclibre.org</a> se utilizará una <strong>carpeta</strong> como área de trabajo de Visual Studio Code (no un Área de trabajo).</p>

    <ol>
      <li>Con el Explorador de archivos de Windows, cree la carpeta Documentos &gt; IAW &gt; PHP:

        <p class="captura">
          <img src="../img/vscode/vsc-php-area-trabajo-1.png" alt="VSC. Área de trabajo" width="1024" height="170">
        </p>
      </li>

      <li>Cree la carpeta Documentos &gt; IAW &gt; PHP &gt; ejercicios y la carpeta Documentos &gt; IAW &gt; PHP &gt; pruebas:
        <p class="captura">
          <img src="../img/vscode/vsc-php-area-trabajo-2.png" alt="VSC. Área de trabajo" width="1024" height="200">
        </p>
      </li>

      <li>En Visual Studio Code, elija la opción de menú <span class="soft-menu">Archivo &gt; Abrir carpeta ...</span>:
        <p class="captura">
          <img src="../img/vscode/vsc-php-area-trabajo-3.png" alt="VSC. Área de trabajo" width="1024" height="250">
        </p>
      </li>

      <li>Seleccione la carpeta Documentos &gt; IAW &gt; PHP:
        <p class="captura">
          <img src="../img/vscode/vsc-php-area-trabajo-4.png" alt="VSC. Área de trabajo" width="1024" height="390">
        </p>
      </li>

      <li>Si es la primera vez que abre la carpeta, le pedirá confirmar que confía en el contenido de la carpeta.:
        <p class="captura">
          <img src="../img/vscode/vsc-php-area-trabajo-5.png" alt="VSC. Área de trabajo" width="1024" height="576">
        </p>
      </li>

      <li>La carpeta elegida se mostrará al hacer clic en el icono Explorador de la barra de actividades:
        <p class="captura">
          <img src="../img/vscode/vsc-php-area-trabajo-6.png" alt="VSC. Área de trabajo" width="1024" height="180">
        </p>
      </li>
    </ol>
  </section>

  <section id="seleccionar-perfil">
    <h2>Seleccionar el perfil recomendado</h2>

    <p>Para seleccionar el perfil de Visual Studio Code recomendado para este curso ...</p>
    <ul>
      <li>Haga clic en la rueda dentada y elija la opción <span class="soft-menu">Perfiles</span>:
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-1.png" alt="VSC. Seleccionar perfil recomendado" width="1024" height="350">
        </p>
      </li>
      <li>Se abrirá la pestaña de administración de los perfiles (con el título <strong>Perfiles</strong>):
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-importar-2.png" alt="VSC. Seleccionar perfil recomendado" width="1024" height="410">
        </p>
      </li>
      <li>Active el perfil en la ventana actual haciendo clic en el botón situado a la derecha del nombre del perfil en el lado izquierdo de la ventana.
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-seleccionar-3.png" alt="VSC. Seleccionar perfil recomendado" width="1024" height="230">
        </p>
      </li>
      <li>Una vez activado el perfil, en la pestaña de <strong>Perfiles</strong> se indicará el perfil en uso.
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-seleccionar-4.png" alt="VSC. Seleccionar perfil recomendado" width="1024" height="215">
        </p>
      </li>
      <li>Una vez activado el perfil, puede cerrar la pestaña <strong>Perfiles</strong>.
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-seleccionar-5.png" alt="VSC. Seleccionar perfil recomendado" width="1024" height="215">
        </p>
      </li>
      <li>La rueda dentada mostrará las primeras letras del perfil (<strong>PH</strong> en este caso), salvo que el perfil tenga un icono asociado en cuyo caso la rueda dentada se sustituirá por el icono.
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-seleccionar-6.png" alt="VSC. Seleccionar perfil recomendado" width="1024" height="120">
        </p>
      </li>
      <li>La selección del perfil debe repetirse cada vez que abra por primera vez una carpeta o un área de trabajo. VSCode recuerda la selección.</li>
      <li>Para completar la configuración de un perfil, como se comenta en los apartados siguientes, es necesario activar el perfil correspondiente.</li>
    </ul>
  </section>

  <section id="preferencias">
    <h2>Configuración</h2>

    <p>Por motivos de seguridad, al exportar un perfil VSCode no incluye las referencias a rutas de archivos que aparezcan en el archivo de preferencias. En el caso del perfil recomendado para seguir estos apuntes, la preferencia que indica la ruta al ejecutable del intérprete de PHP no está incluida en el perfil y debe añadirse de forma manual. Para facilitar esa tarea, la preferencia está incluida en el perfil, pero comentada, por lo que basta con descomentarla:</p>

    <ul>
      <li>En caso de no realizar el ajuste de configuración que se comenta en este apartado, al abrir cualquier programa PHP, VSCode mostraría el siguiente aviso::
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-configuracion-error-1.png" alt="VSC. Aviso configuración incompleta" width="1024" height="210">
        </p>
      </li>
      <li>Para editar el archivo de configuración y evitar este aviso, compruebe primero que tiene el perfil recomendado activado:
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-configuracion-1.png" alt="VSC. Modificar preferencias de configuración" width="1024" height="110">
        </p>
      </li>
      <li>Haga clic en la rueda dentada y elija la opción <span class="soft-menu">Configuración</span>:
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-configuracion-2.png" alt="VSC. Modificar preferencias de configuración" width="1024" height="350">
        </p>
      </li>
      <li>Se abrirá una pestaña con las preferencias de configuración. Si no hemos abierto ninguna carpeta ni área de trabajo, esta ventana muestra únicamente las preferencias globales (Usuario):
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-configuracion-3.png" alt="VSC. Modificar preferencias de configuración" width="1024" height="205">
        </p>
      </li>
      <li>Se abrirá una nueva pestaña mostrando el nombre del fichero, su ubicación en el disco y el contenido.:
        <p class="captura">
          <img src="../img/vscode/vsc-perfil-configuracion-4.png" alt="VSC. Modificar preferencias de configuración" width="1024" height="185">
        </p>
      </li>
      <li>Busque la preferencia "php.validate.executablePath" en el archivo de preferencias (al comienzo del archivo se indica la línea en la que se encuentra esta preferencia)...

        <div class="codigo">
          <pre>
<code class="language-json">...
  //
  // PHP: Validate: Executable path
  // Ubicación del intérprete de PHP.
  // "php.validate.executablePath": "<span class="codigo-resaltado">C:/xampp/php/php.exe</span>",
...</code>
</pre>
        </div>
      </li>
      <li>... y descoméntela (la ruta debe indicar la ubicación del intérprete de PHP en su ordenador):
        <div class="codigo">
          <pre>
<code class="language-json">...
  //
  // PHP: Validate: Executable path
  // Ubicación del intérprete de PHP.
  "php.validate.executablePath": "<span class="codigo-resaltado">C:/xampp/php/php.exe</span>",
...</code>
</pre>
        </div>
      </li>
      <li>Guarde el archivo y cierre las pestañas abiertas.</li>
    </ul>
  </section>

  <section id="php-cs-fixer">
    <h2>Archivo de configuración de PHP CS Fixer</h2>

    <p>Por motivos de seguridad, al exportar un perfil VSCode no incluye archivos adicionales a los propios de Visual Studio Code. En el caso del perfil recomendado para seguir estos apuntes, el archivo de configuración de la extensión PHP CS Fixer no está incluido en el perfil, por lo que es necesario crearlo manualmente.</p>

    <p>Este archivo debe crearse en la carpeta .vscode situada la raíz de la carpeta de trabajo. En caso de no existir esa carpeta, debe crearse.</p>

    <ul>
      <li>Para crear el archivo de configuración de la extensión PHP CS Fixer, abra la carpeta del área de trabajo

        <p class="captura">
          <img src="../img/vscode/vsc-perfil-phpcsfixer-1.png" alt="VSC. Archivo de configuración de PHP CS Fixer" width="1024" height="175">
        </p>
      </li>
      <li>Cree la carpeta .vscode en la carpeta raíz de la carpeta de trabajo (con el Explorador de archivos de Windows o con el propio Visual Studio Code).

        <p class="captura">
          <img src="../img/vscode/vsc-perfil-phpcsfixer-2.png" alt="VSC. Archivo de configuración de PHP CS Fixer" width="1024" height="180">
        </p>
      </li>
      <li>Cree el fichero <strong>php-cs-fixer-config.php</strong> en la carpeta .vscode (con el Explorador de archivos de Windows o con el propio Visual Studio Code).

        <p class="captura">
          <img src="../img/vscode/vsc-perfil-phpcsfixer-3.png" alt="VSC. Archivo de configuración de PHP CS Fixer" width="1024" height="190">
        </p>
      </li>
      <li>Copie en este fichero la configuración recomendada para PHP CS Fixer que se muestra a continuación.
        <div class="codigo copy">
          <pre>
<code class="language-php">&lt;?php

  // Apuntes del curso Programación web en PHP
  // https://www.mclibre.org/consultar/php/
  //
  // Archivo de configuración para PHP CS Fixer
  // 2022-12-05

  return (new PhpCsFixer\Config())
      -&gt;setRules([
          '@PER'                                        =&gt; true,
          'align_multiline_comment'                     =&gt; ['comment_type' =&gt; 'all_multiline'],
          'array_indentation'                           =&gt; true,
          'array_syntax'                                =&gt; ['syntax' =&gt; 'short'],
          'binary_operator_spaces'                      =&gt; ['default' =&gt; 'align_single_space_minimal', 'operators' =&gt; [], ],
          'cast_spaces'                                 =&gt; ['space' =&gt; 'none'],
          'combine_consecutive_issets'                  =&gt; true,
          'concat_space'                                =&gt; ['spacing' =&gt; 'one'],
          'explicit_indirect_variable'                  =&gt; true,
          'function_typehint_space'                     =&gt; true,
          'include'                                     =&gt; true,
          'linebreak_after_opening_tag'                 =&gt; true,
          'list_syntax'                                 =&gt; ['syntax' =&gt; 'short'],
          'magic_constant_casing'                       =&gt; true,
          'magic_method_casing'                         =&gt; true,
          'multiline_comment_opening_closing'           =&gt; true,
          'multiline_whitespace_before_semicolons'      =&gt; true,
          'native_function_casing'                      =&gt; true,
          'native_function_type_declaration_casing'     =&gt; true,
          'no_alias_language_construct_call'            =&gt; true,
          'no_alternative_syntax'                       =&gt; true,
          'no_empty_statement'                          =&gt; true,
          'no_extra_blank_lines'                        =&gt; true,
          'no_mixed_echo_print'                         =&gt; ['use' =&gt; 'print'],
          'no_multiline_whitespace_around_double_arrow' =&gt; true,
          'no_short_bool_cast'                          =&gt; true,
          'no_singleline_whitespace_before_semicolons'  =&gt; true,
          'no_spaces_around_offset'                     =&gt; true,
          'no_superfluous_elseif'                       =&gt; true,
          'no_unneeded_control_parentheses'             =&gt; true,
          'no_unneeded_curly_braces'                    =&gt; true,
          'no_unset_cast'                               =&gt; true,
          'no_unused_imports'                           =&gt; true,
          'no_useless_concat_operator'                  =&gt; true,
          'no_useless_else'                             =&gt; true,
          'no_useless_return'                           =&gt; true,
          'no_whitespace_before_comma_in_array'         =&gt; true,
          'normalize_index_brace'                       =&gt; true,
          'object_operator_without_whitespace'          =&gt; true,
          'semicolon_after_instruction'                 =&gt; true,
          'single_line_comment_style'                   =&gt; true,
          'space_after_semicolon'                       =&gt; true,
          'standardize_not_equals'                      =&gt; true,
          'ternary_to_null_coalescing'                  =&gt; true,
          'trailing_comma_in_multiline'                 =&gt; true,
          'trim_array_spaces'                           =&gt; true,
          'unary_operator_spaces'                       =&gt; true,
          'whitespace_after_comma_in_array'             =&gt; true,
      ])
      -&gt;setIndent("    ")
      -&gt;setLineEnding("\n");</code>
  </pre>
        </div>
      </li>
      <li>Guarde el archivo y cierre la pestaña.</li>
    </ul>
  </section>

  <footer>
    <p class="ultmod">Última modificación de esta página: 24 de septiembre de 2024</p>

    <p class="licencia">
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es"><img src="../varios/iconos/icono-cc-by-sa.svg" alt="Licencia Creative Commons" title="Licencia Creative Commons BY-SA" width="120" height="42"></a><br>
      Esta página forma parte del curso <strong><a href="https://www.mclibre.org/consultar/php/">Programación web en PHP</a></strong> por <a href="https://www.mclibre.org/" rel="author">Bartolomé Sintes Marco</a><br>
      que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es">Licencia Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional (CC BY-SA 4.0)</a>.
    </p>
  </footer>
</body>
</html>
